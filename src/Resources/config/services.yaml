services:
  _defaults:
    autowire: true
    autoconfigure: true
    public: false

  ibexa_automatic_migrations.settings_service:
    class: vardumper\IbexaAutomaticMigrationsBundle\Service\SettingsService
    arguments:
      - '%kernel.project_dir%'
      - '%ibexa_automatic_migrations.enabled%'
      - '%ibexa_automatic_migrations.types%'
    public: true

  vardumper\IbexaAutomaticMigrationsBundle\Service\SettingsService: '@ibexa_automatic_migrations.settings_service'

  ibexa_automatic_migrations.content_type_listener:
    class: vardumper\IbexaAutomaticMigrationsBundle\EventListener\ContentTypeListener
    autoconfigure: true
    autowire: true
    public: false
  ibexa_automatic_migrations.content_type_group_listener:
    class: vardumper\IbexaAutomaticMigrationsBundle\EventListener\ContentTypeGroupListener
    autoconfigure: true
    autowire: true
    public: false
    arguments:
      - '@logger'
      - '@ibexa_automatic_migrations.settings_service'
  ibexa_automatic_migrations.section_listener:
    class: vardumper\IbexaAutomaticMigrationsBundle\EventListener\SectionListener
    autoconfigure: true
    autowire: true
    public: false
    arguments:
      - '@logger'
      - '@ibexa_automatic_migrations.settings_service'

  ibexa_automatic_migrations.object_state_listener:
    class: vardumper\IbexaAutomaticMigrationsBundle\EventListener\ObjectStateListener
    autoconfigure: true
    autowire: true
    public: false
    arguments:
      - '@logger'
      - '@ibexa_automatic_migrations.settings_service'
      - '%kernel.project_dir%'
      - '@service_container'
    tags:
      - { name: kernel.event_subscriber }
  ibexa_automatic_migrations.object_state_group_listener:
    class: vardumper\IbexaAutomaticMigrationsBundle\EventListener\ObjectStateGroupListener
    autoconfigure: true
    autowire: true
    public: false
    arguments:
      - '@logger'
      - '@ibexa_automatic_migrations.settings_service'

  ibexa_automatic_migrations.user_listener:
    class: vardumper\IbexaAutomaticMigrationsBundle\EventListener\UserListener
    autoconfigure: true
    autowire: true
    public: false
    arguments:
      - '@logger'
      - '@ibexa_automatic_migrations.settings_service'
      - '%kernel.project_dir%'
      - '@service_container'
    tags:
      - { name: kernel.event_subscriber }

  ibexa_automatic_migrations.role_listener:
    class: vardumper\IbexaAutomaticMigrationsBundle\EventListener\RoleListener
    autoconfigure: true
    autowire: true
    public: false
    arguments:
      - '@logger'
      - '@ibexa_automatic_migrations.settings_service'
      - '%kernel.project_dir%'
      - '@service_container'
    tags:
      - { name: kernel.event_subscriber }

  ibexa_automatic_migrations.language_listener:
    class: vardumper\IbexaAutomaticMigrationsBundle\EventListener\LanguageListener
    autoconfigure: true
    autowire: true
    public: false
    arguments:
      - '@logger'
      - '@ibexa_automatic_migrations.settings_service'
      - '%kernel.project_dir%'
      - '@service_container'
    tags:
      - { name: kernel.event_subscriber }

  ibexa_automatic_migrations.url_listener:
    class: vardumper\IbexaAutomaticMigrationsBundle\EventListener\UrlListener
    autoconfigure: true
    autowire: true
    public: false
    arguments:
      - '@logger'
      - '@ibexa_automatic_migrations.settings_service'
      - '%kernel.project_dir%'
      - '@service_container'
    tags:
      - { name: kernel.event_subscriber }

  ibexa_automatic_migrations.menu_subscriber:
    class: vardumper\IbexaAutomaticMigrationsBundle\EventSubscriber\MigrationsMenuSubscriber
    autoconfigure: true
    autowire: true
    public: false

  vardumper\IbexaAutomaticMigrationsBundle\Controller\MigrationsController:
    autoconfigure: true
    autowire: true
    public: true